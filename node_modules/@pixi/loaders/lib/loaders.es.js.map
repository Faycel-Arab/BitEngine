{"version":3,"file":"loaders.es.js","sources":["../../../node_modules/parse-uri/index.js","../../../node_modules/mini-signals/lib/mini-signals.js","../../../node_modules/resource-loader/src/Resource.js","../../../node_modules/resource-loader/src/b64.js","../../../node_modules/resource-loader/src/middlewares/parsing/blob.js","../src/TextureLoader.js","../src/Loader.js","../src/AppLoaderPlugin.js","../src/index.js"],"sourcesContent":["'use strict'\n\nmodule.exports = function parseURI (str, opts) {\n  opts = opts || {}\n\n  var o = {\n    key: ['source', 'protocol', 'authority', 'userInfo', 'user', 'password', 'host', 'port', 'relative', 'path', 'directory', 'file', 'query', 'anchor'],\n    q: {\n      name: 'queryKey',\n      parser: /(?:^|&)([^&=]*)=?([^&]*)/g\n    },\n    parser: {\n      strict: /^(?:([^:\\/?#]+):)?(?:\\/\\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\\/?#]*)(?::(\\d*))?))?((((?:[^?#\\/]*\\/)*)([^?#]*))(?:\\?([^#]*))?(?:#(.*))?)/,\n      loose: /^(?:(?![^:@]+:[^:@\\/]*@)([^:\\/?#.]+):)?(?:\\/\\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/\n    }\n  }\n\n  var m = o.parser[opts.strictMode ? 'strict' : 'loose'].exec(str)\n  var uri = {}\n  var i = 14\n\n  while (i--) uri[o.key[i]] = m[i] || ''\n\n  uri[o.q.name] = {}\n  uri[o.key[12]].replace(o.q.parser, function ($0, $1, $2) {\n    if ($1) uri[o.q.name][$1] = $2\n  })\n\n  return uri\n}\n","'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar MiniSignalBinding = (function () {\n  function MiniSignalBinding(fn, once, thisArg) {\n    if (once === undefined) once = false;\n\n    _classCallCheck(this, MiniSignalBinding);\n\n    this._fn = fn;\n    this._once = once;\n    this._thisArg = thisArg;\n    this._next = this._prev = this._owner = null;\n  }\n\n  _createClass(MiniSignalBinding, [{\n    key: 'detach',\n    value: function detach() {\n      if (this._owner === null) return false;\n      this._owner.detach(this);\n      return true;\n    }\n  }]);\n\n  return MiniSignalBinding;\n})();\n\nfunction _addMiniSignalBinding(self, node) {\n  if (!self._head) {\n    self._head = node;\n    self._tail = node;\n  } else {\n    self._tail._next = node;\n    node._prev = self._tail;\n    self._tail = node;\n  }\n\n  node._owner = self;\n\n  return node;\n}\n\nvar MiniSignal = (function () {\n  function MiniSignal() {\n    _classCallCheck(this, MiniSignal);\n\n    this._head = this._tail = undefined;\n  }\n\n  _createClass(MiniSignal, [{\n    key: 'handlers',\n    value: function handlers() {\n      var exists = arguments.length <= 0 || arguments[0] === undefined ? false : arguments[0];\n\n      var node = this._head;\n\n      if (exists) return !!node;\n\n      var ee = [];\n\n      while (node) {\n        ee.push(node);\n        node = node._next;\n      }\n\n      return ee;\n    }\n  }, {\n    key: 'has',\n    value: function has(node) {\n      if (!(node instanceof MiniSignalBinding)) {\n        throw new Error('MiniSignal#has(): First arg must be a MiniSignalBinding object.');\n      }\n\n      return node._owner === this;\n    }\n  }, {\n    key: 'dispatch',\n    value: function dispatch() {\n      var node = this._head;\n\n      if (!node) return false;\n\n      while (node) {\n        if (node._once) this.detach(node);\n        node._fn.apply(node._thisArg, arguments);\n        node = node._next;\n      }\n\n      return true;\n    }\n  }, {\n    key: 'add',\n    value: function add(fn) {\n      var thisArg = arguments.length <= 1 || arguments[1] === undefined ? null : arguments[1];\n\n      if (typeof fn !== 'function') {\n        throw new Error('MiniSignal#add(): First arg must be a Function.');\n      }\n      return _addMiniSignalBinding(this, new MiniSignalBinding(fn, false, thisArg));\n    }\n  }, {\n    key: 'once',\n    value: function once(fn) {\n      var thisArg = arguments.length <= 1 || arguments[1] === undefined ? null : arguments[1];\n\n      if (typeof fn !== 'function') {\n        throw new Error('MiniSignal#once(): First arg must be a Function.');\n      }\n      return _addMiniSignalBinding(this, new MiniSignalBinding(fn, true, thisArg));\n    }\n  }, {\n    key: 'detach',\n    value: function detach(node) {\n      if (!(node instanceof MiniSignalBinding)) {\n        throw new Error('MiniSignal#detach(): First arg must be a MiniSignalBinding object.');\n      }\n      if (node._owner !== this) return this;\n\n      if (node._prev) node._prev._next = node._next;\n      if (node._next) node._next._prev = node._prev;\n\n      if (node === this._head) {\n        this._head = node._next;\n        if (node._next === null) {\n          this._tail = null;\n        }\n      } else if (node === this._tail) {\n        this._tail = node._prev;\n        this._tail._next = null;\n      }\n\n      node._owner = null;\n      return this;\n    }\n  }, {\n    key: 'detachAll',\n    value: function detachAll() {\n      var node = this._head;\n      if (!node) return this;\n\n      this._head = this._tail = null;\n\n      while (node) {\n        node._owner = null;\n        node = node._next;\n      }\n      return this;\n    }\n  }]);\n\n  return MiniSignal;\n})();\n\nMiniSignal.MiniSignalBinding = MiniSignalBinding;\n\nexports['default'] = MiniSignal;\nmodule.exports = exports['default'];\n","import parseUri from 'parse-uri';\nimport Signal from 'mini-signals';\n\n// tests if CORS is supported in XHR, if not we need to use XDR\nconst useXdr = !!(window.XDomainRequest && !('withCredentials' in (new XMLHttpRequest())));\nlet tempAnchor = null;\n\n// some status constants\nconst STATUS_NONE = 0;\nconst STATUS_OK = 200;\nconst STATUS_EMPTY = 204;\nconst STATUS_IE_BUG_EMPTY = 1223;\nconst STATUS_TYPE_OK = 2;\n\n// noop\nfunction _noop() { /* empty */ }\n\n/**\n * Manages the state and loading of a resource and all child resources.\n *\n * @class\n */\nexport class Resource {\n    /**\n     * Sets the load type to be used for a specific extension.\n     *\n     * @static\n     * @param {string} extname - The extension to set the type for, e.g. \"png\" or \"fnt\"\n     * @param {Resource.LOAD_TYPE} loadType - The load type to set it to.\n     */\n    static setExtensionLoadType(extname, loadType) {\n        setExtMap(Resource._loadTypeMap, extname, loadType);\n    }\n\n    /**\n     * Sets the load type to be used for a specific extension.\n     *\n     * @static\n     * @param {string} extname - The extension to set the type for, e.g. \"png\" or \"fnt\"\n     * @param {Resource.XHR_RESPONSE_TYPE} xhrType - The xhr type to set it to.\n     */\n    static setExtensionXhrType(extname, xhrType) {\n        setExtMap(Resource._xhrTypeMap, extname, xhrType);\n    }\n\n    /**\n     * @param {string} name - The name of the resource to load.\n     * @param {string|string[]} url - The url for this resource, for audio/video loads you can pass\n     *      an array of sources.\n     * @param {object} [options] - The options for the load.\n     * @param {string|boolean} [options.crossOrigin] - Is this request cross-origin? Default is to\n     *      determine automatically.\n     * @param {number} [options.timeout=0] - A timeout in milliseconds for the load. If the load takes\n     *      longer than this time it is cancelled and the load is considered a failure. If this value is\n     *      set to `0` then there is no explicit timeout.\n     * @param {Resource.LOAD_TYPE} [options.loadType=Resource.LOAD_TYPE.XHR] - How should this resource\n     *      be loaded?\n     * @param {Resource.XHR_RESPONSE_TYPE} [options.xhrType=Resource.XHR_RESPONSE_TYPE.DEFAULT] - How\n     *      should the data being loaded be interpreted when using XHR?\n     * @param {Resource.IMetadata} [options.metadata] - Extra configuration for middleware and the Resource object.\n     */\n    constructor(name, url, options) {\n        if (typeof name !== 'string' || typeof url !== 'string') {\n            throw new Error('Both name and url are required for constructing a resource.');\n        }\n\n        options = options || {};\n\n        /**\n         * The state flags of this resource.\n         *\n         * @private\n         * @member {number}\n         */\n        this._flags = 0;\n\n        // set data url flag, needs to be set early for some _determineX checks to work.\n        this._setFlag(Resource.STATUS_FLAGS.DATA_URL, url.indexOf('data:') === 0);\n\n        /**\n         * The name of this resource.\n         *\n         * @readonly\n         * @member {string}\n         */\n        this.name = name;\n\n        /**\n         * The url used to load this resource.\n         *\n         * @readonly\n         * @member {string}\n         */\n        this.url = url;\n\n        /**\n         * The extension used to load this resource.\n         *\n         * @readonly\n         * @member {string}\n         */\n        this.extension = this._getExtension();\n\n        /**\n         * The data that was loaded by the resource.\n         *\n         * @member {any}\n         */\n        this.data = null;\n\n        /**\n         * Is this request cross-origin? If unset, determined automatically.\n         *\n         * @member {string}\n         */\n        this.crossOrigin = options.crossOrigin === true ? 'anonymous' : options.crossOrigin;\n\n        /**\n         * A timeout in milliseconds for the load. If the load takes longer than this time\n         * it is cancelled and the load is considered a failure. If this value is set to `0`\n         * then there is no explicit timeout.\n         *\n         * @member {number}\n         */\n        this.timeout = options.timeout || 0;\n\n        /**\n         * The method of loading to use for this resource.\n         *\n         * @member {Resource.LOAD_TYPE}\n         */\n        this.loadType = options.loadType || this._determineLoadType();\n\n        /**\n         * The type used to load the resource via XHR. If unset, determined automatically.\n         *\n         * @member {string}\n         */\n        this.xhrType = options.xhrType;\n\n        /**\n         * Extra info for middleware, and controlling specifics about how the resource loads.\n         *\n         * Note that if you pass in a `loadElement`, the Resource class takes ownership of it.\n         * Meaning it will modify it as it sees fit.\n         *\n         * @member {Resource.IMetadata}\n         */\n        this.metadata = options.metadata || {};\n\n        /**\n         * The error that occurred while loading (if any).\n         *\n         * @readonly\n         * @member {Error}\n         */\n        this.error = null;\n\n        /**\n         * The XHR object that was used to load this resource. This is only set\n         * when `loadType` is `Resource.LOAD_TYPE.XHR`.\n         *\n         * @readonly\n         * @member {XMLHttpRequest}\n         */\n        this.xhr = null;\n\n        /**\n         * The child resources this resource owns.\n         *\n         * @readonly\n         * @member {Resource[]}\n         */\n        this.children = [];\n\n        /**\n         * The resource type.\n         *\n         * @readonly\n         * @member {Resource.TYPE}\n         */\n        this.type = Resource.TYPE.UNKNOWN;\n\n        /**\n         * The progress chunk owned by this resource.\n         *\n         * @readonly\n         * @member {number}\n         */\n        this.progressChunk = 0;\n\n        /**\n         * The `dequeue` method that will be used a storage place for the async queue dequeue method\n         * used privately by the loader.\n         *\n         * @private\n         * @member {function}\n         */\n        this._dequeue = _noop;\n\n        /**\n         * Used a storage place for the on load binding used privately by the loader.\n         *\n         * @private\n         * @member {function}\n         */\n        this._onLoadBinding = null;\n\n        /**\n         * The timer for element loads to check if they timeout.\n         *\n         * @private\n         * @member {number}\n         */\n        this._elementTimer = 0;\n\n        /**\n         * The `complete` function bound to this resource's context.\n         *\n         * @private\n         * @member {function}\n         */\n        this._boundComplete = this.complete.bind(this);\n\n        /**\n         * The `_onError` function bound to this resource's context.\n         *\n         * @private\n         * @member {function}\n         */\n        this._boundOnError = this._onError.bind(this);\n\n        /**\n         * The `_onProgress` function bound to this resource's context.\n         *\n         * @private\n         * @member {function}\n         */\n        this._boundOnProgress = this._onProgress.bind(this);\n\n        /**\n         * The `_onTimeout` function bound to this resource's context.\n         *\n         * @private\n         * @member {function}\n         */\n        this._boundOnTimeout = this._onTimeout.bind(this);\n\n        // xhr callbacks\n        this._boundXhrOnError = this._xhrOnError.bind(this);\n        this._boundXhrOnTimeout = this._xhrOnTimeout.bind(this);\n        this._boundXhrOnAbort = this._xhrOnAbort.bind(this);\n        this._boundXhrOnLoad = this._xhrOnLoad.bind(this);\n\n        /**\n         * Dispatched when the resource beings to load.\n         *\n         * The callback looks like {@link Resource.OnStartSignal}.\n         *\n         * @member {Signal<Resource.OnStartSignal>}\n         */\n        this.onStart = new Signal();\n\n        /**\n         * Dispatched each time progress of this resource load updates.\n         * Not all resources types and loader systems can support this event\n         * so sometimes it may not be available. If the resource\n         * is being loaded on a modern browser, using XHR, and the remote server\n         * properly sets Content-Length headers, then this will be available.\n         *\n         * The callback looks like {@link Resource.OnProgressSignal}.\n         *\n         * @member {Signal<Resource.OnProgressSignal>}\n         */\n        this.onProgress = new Signal();\n\n        /**\n         * Dispatched once this resource has loaded, if there was an error it will\n         * be in the `error` property.\n         *\n         * The callback looks like {@link Resource.OnCompleteSignal}.\n         *\n         * @member {Signal<Resource.OnCompleteSignal>}\n         */\n        this.onComplete = new Signal();\n\n        /**\n         * Dispatched after this resource has had all the *after* middleware run on it.\n         *\n         * The callback looks like {@link Resource.OnCompleteSignal}.\n         *\n         * @member {Signal<Resource.OnCompleteSignal>}\n         */\n        this.onAfterMiddleware = new Signal();\n    }\n\n    /**\n     * When the resource starts to load.\n     *\n     * @memberof Resource\n     * @callback OnStartSignal\n     * @param {Resource} resource - The resource that the event happened on.\n     */\n\n    /**\n     * When the resource reports loading progress.\n     *\n     * @memberof Resource\n     * @callback OnProgressSignal\n     * @param {Resource} resource - The resource that the event happened on.\n     * @param {number} percentage - The progress of the load in the range [0, 1].\n     */\n\n    /**\n     * When the resource finishes loading.\n     *\n     * @memberof Resource\n     * @callback OnCompleteSignal\n     * @param {Resource} resource - The resource that the event happened on.\n     */\n\n    /**\n     * @memberof Resource\n     * @typedef {object} IMetadata\n     * @property {HTMLImageElement|HTMLAudioElement|HTMLVideoElement} [loadElement=null] - The\n     *      element to use for loading, instead of creating one.\n     * @property {boolean} [skipSource=false] - Skips adding source(s) to the load element. This\n     *      is useful if you want to pass in a `loadElement` that you already added load sources to.\n     * @property {string|string[]} [mimeType] - The mime type to use for the source element\n     *      of a video/audio elment. If the urls are an array, you can pass this as an array as well\n     *      where each index is the mime type to use for the corresponding url index.\n     */\n\n    /**\n     * Stores whether or not this url is a data url.\n     *\n     * @readonly\n     * @member {boolean}\n     */\n    get isDataUrl() {\n        return this._hasFlag(Resource.STATUS_FLAGS.DATA_URL);\n    }\n\n    /**\n     * Describes if this resource has finished loading. Is true when the resource has completely\n     * loaded.\n     *\n     * @readonly\n     * @member {boolean}\n     */\n    get isComplete() {\n        return this._hasFlag(Resource.STATUS_FLAGS.COMPLETE);\n    }\n\n    /**\n     * Describes if this resource is currently loading. Is true when the resource starts loading,\n     * and is false again when complete.\n     *\n     * @readonly\n     * @member {boolean}\n     */\n    get isLoading() {\n        return this._hasFlag(Resource.STATUS_FLAGS.LOADING);\n    }\n\n    /**\n     * Marks the resource as complete.\n     *\n     */\n    complete() {\n        this._clearEvents();\n        this._finish();\n    }\n\n    /**\n     * Aborts the loading of this resource, with an optional message.\n     *\n     * @param {string} message - The message to use for the error\n     */\n    abort(message) {\n        // abort can be called multiple times, ignore subsequent calls.\n        if (this.error) {\n            return;\n        }\n\n        // store error\n        this.error = new Error(message);\n\n        // clear events before calling aborts\n        this._clearEvents();\n\n        // abort the actual loading\n        if (this.xhr) {\n            this.xhr.abort();\n        }\n        else if (this.xdr) {\n            this.xdr.abort();\n        }\n        else if (this.data) {\n            // single source\n            if (this.data.src) {\n                this.data.src = Resource.EMPTY_GIF;\n            }\n            // multi-source\n            else {\n                while (this.data.firstChild) {\n                    this.data.removeChild(this.data.firstChild);\n                }\n            }\n        }\n\n        // done now.\n        this._finish();\n    }\n\n    /**\n     * Kicks off loading of this resource. This method is asynchronous.\n     *\n     * @param {Resource.OnCompleteSignal} [cb] - Optional callback to call once the resource is loaded.\n     */\n    load(cb) {\n        if (this.isLoading) {\n            return;\n        }\n\n        if (this.isComplete) {\n            if (cb) {\n                setTimeout(() => cb(this), 1);\n            }\n\n            return;\n        }\n        else if (cb) {\n            this.onComplete.once(cb);\n        }\n\n        this._setFlag(Resource.STATUS_FLAGS.LOADING, true);\n\n        this.onStart.dispatch(this);\n\n        // if unset, determine the value\n        if (this.crossOrigin === false || typeof this.crossOrigin !== 'string') {\n            this.crossOrigin = this._determineCrossOrigin(this.url);\n        }\n\n        switch (this.loadType) {\n            case Resource.LOAD_TYPE.IMAGE:\n                this.type = Resource.TYPE.IMAGE;\n                this._loadElement('image');\n                break;\n\n            case Resource.LOAD_TYPE.AUDIO:\n                this.type = Resource.TYPE.AUDIO;\n                this._loadSourceElement('audio');\n                break;\n\n            case Resource.LOAD_TYPE.VIDEO:\n                this.type = Resource.TYPE.VIDEO;\n                this._loadSourceElement('video');\n                break;\n\n            case Resource.LOAD_TYPE.XHR:\n                /* falls through */\n            default:\n                if (useXdr && this.crossOrigin) {\n                    this._loadXdr();\n                }\n                else {\n                    this._loadXhr();\n                }\n                break;\n        }\n    }\n\n    /**\n     * Checks if the flag is set.\n     *\n     * @private\n     * @param {number} flag - The flag to check.\n     * @return {boolean} True if the flag is set.\n     */\n    _hasFlag(flag) {\n        return (this._flags & flag) !== 0;\n    }\n\n    /**\n     * (Un)Sets the flag.\n     *\n     * @private\n     * @param {number} flag - The flag to (un)set.\n     * @param {boolean} value - Whether to set or (un)set the flag.\n     */\n    _setFlag(flag, value) {\n        this._flags = value ? (this._flags | flag) : (this._flags & ~flag);\n    }\n\n    /**\n     * Clears all the events from the underlying loading source.\n     *\n     * @private\n     */\n    _clearEvents() {\n        clearTimeout(this._elementTimer);\n\n        if (this.data && this.data.removeEventListener) {\n            this.data.removeEventListener('error', this._boundOnError, false);\n            this.data.removeEventListener('load', this._boundComplete, false);\n            this.data.removeEventListener('progress', this._boundOnProgress, false);\n            this.data.removeEventListener('canplaythrough', this._boundComplete, false);\n        }\n\n        if (this.xhr) {\n            if (this.xhr.removeEventListener) {\n                this.xhr.removeEventListener('error', this._boundXhrOnError, false);\n                this.xhr.removeEventListener('timeout', this._boundXhrOnTimeout, false);\n                this.xhr.removeEventListener('abort', this._boundXhrOnAbort, false);\n                this.xhr.removeEventListener('progress', this._boundOnProgress, false);\n                this.xhr.removeEventListener('load', this._boundXhrOnLoad, false);\n            }\n            else {\n                this.xhr.onerror = null;\n                this.xhr.ontimeout = null;\n                this.xhr.onprogress = null;\n                this.xhr.onload = null;\n            }\n        }\n    }\n\n    /**\n     * Finalizes the load.\n     *\n     * @private\n     */\n    _finish() {\n        if (this.isComplete) {\n            throw new Error('Complete called again for an already completed resource.');\n        }\n\n        this._setFlag(Resource.STATUS_FLAGS.COMPLETE, true);\n        this._setFlag(Resource.STATUS_FLAGS.LOADING, false);\n\n        this.onComplete.dispatch(this);\n    }\n\n    /**\n     * Loads this resources using an element that has a single source,\n     * like an HTMLImageElement.\n     *\n     * @private\n     * @param {string} type - The type of element to use.\n     */\n    _loadElement(type) {\n        if (this.metadata.loadElement) {\n            this.data = this.metadata.loadElement;\n        }\n        else if (type === 'image' && typeof window.Image !== 'undefined') {\n            this.data = new Image();\n        }\n        else {\n            this.data = document.createElement(type);\n        }\n\n        if (this.crossOrigin) {\n            this.data.crossOrigin = this.crossOrigin;\n        }\n\n        if (!this.metadata.skipSource) {\n            this.data.src = this.url;\n        }\n\n        this.data.addEventListener('error', this._boundOnError, false);\n        this.data.addEventListener('load', this._boundComplete, false);\n        this.data.addEventListener('progress', this._boundOnProgress, false);\n\n        if (this.timeout) {\n            this._elementTimer = setTimeout(this._boundOnTimeout, this.timeout);\n        }\n    }\n\n    /**\n     * Loads this resources using an element that has multiple sources,\n     * like an HTMLAudioElement or HTMLVideoElement.\n     *\n     * @private\n     * @param {string} type - The type of element to use.\n     */\n    _loadSourceElement(type) {\n        if (this.metadata.loadElement) {\n            this.data = this.metadata.loadElement;\n        }\n        else if (type === 'audio' && typeof window.Audio !== 'undefined') {\n            this.data = new Audio();\n        }\n        else {\n            this.data = document.createElement(type);\n        }\n\n        if (this.data === null) {\n            this.abort(`Unsupported element: ${type}`);\n\n            return;\n        }\n\n        if (this.crossOrigin) {\n            this.data.crossOrigin = this.crossOrigin;\n        }\n\n        if (!this.metadata.skipSource) {\n            // support for CocoonJS Canvas+ runtime, lacks document.createElement('source')\n            if (navigator.isCocoonJS) {\n                this.data.src = Array.isArray(this.url) ? this.url[0] : this.url;\n            }\n            else if (Array.isArray(this.url)) {\n                const mimeTypes = this.metadata.mimeType;\n\n                for (let i = 0; i < this.url.length; ++i) {\n                    this.data.appendChild(\n                        this._createSource(type, this.url[i], Array.isArray(mimeTypes) ? mimeTypes[i] : mimeTypes)\n                    );\n                }\n            }\n            else {\n                const mimeTypes = this.metadata.mimeType;\n\n                this.data.appendChild(\n                    this._createSource(type, this.url, Array.isArray(mimeTypes) ? mimeTypes[0] : mimeTypes)\n                );\n            }\n        }\n\n        this.data.addEventListener('error', this._boundOnError, false);\n        this.data.addEventListener('load', this._boundComplete, false);\n        this.data.addEventListener('progress', this._boundOnProgress, false);\n        this.data.addEventListener('canplaythrough', this._boundComplete, false);\n\n        this.data.load();\n\n        if (this.timeout) {\n            this._elementTimer = setTimeout(this._boundOnTimeout, this.timeout);\n        }\n    }\n\n    /**\n     * Loads this resources using an XMLHttpRequest.\n     *\n     * @private\n     */\n    _loadXhr() {\n        // if unset, determine the value\n        if (typeof this.xhrType !== 'string') {\n            this.xhrType = this._determineXhrType();\n        }\n\n        const xhr = this.xhr = new XMLHttpRequest();\n\n        // set the request type and url\n        xhr.open('GET', this.url, true);\n\n        xhr.timeout = this.timeout;\n\n        // load json as text and parse it ourselves. We do this because some browsers\n        // *cough* safari *cough* can't deal with it.\n        if (this.xhrType === Resource.XHR_RESPONSE_TYPE.JSON || this.xhrType === Resource.XHR_RESPONSE_TYPE.DOCUMENT) {\n            xhr.responseType = Resource.XHR_RESPONSE_TYPE.TEXT;\n        }\n        else {\n            xhr.responseType = this.xhrType;\n        }\n\n        xhr.addEventListener('error', this._boundXhrOnError, false);\n        xhr.addEventListener('timeout', this._boundXhrOnTimeout, false);\n        xhr.addEventListener('abort', this._boundXhrOnAbort, false);\n        xhr.addEventListener('progress', this._boundOnProgress, false);\n        xhr.addEventListener('load', this._boundXhrOnLoad, false);\n\n        xhr.send();\n    }\n\n    /**\n     * Loads this resources using an XDomainRequest. This is here because we need to support IE9 (gross).\n     *\n     * @private\n     */\n    _loadXdr() {\n        // if unset, determine the value\n        if (typeof this.xhrType !== 'string') {\n            this.xhrType = this._determineXhrType();\n        }\n\n        const xdr = this.xhr = new XDomainRequest(); // eslint-disable-line no-undef\n\n        // XDomainRequest has a few quirks. Occasionally it will abort requests\n        // A way to avoid this is to make sure ALL callbacks are set even if not used\n        // More info here: http://stackoverflow.com/questions/15786966/xdomainrequest-aborts-post-on-ie-9\n        xdr.timeout = this.timeout || 5000; // XDR needs a timeout value or it breaks in IE9\n\n        xdr.onerror = this._boundXhrOnError;\n        xdr.ontimeout = this._boundXhrOnTimeout;\n        xdr.onprogress = this._boundOnProgress;\n        xdr.onload = this._boundXhrOnLoad;\n\n        xdr.open('GET', this.url, true);\n\n        // Note: The xdr.send() call is wrapped in a timeout to prevent an\n        // issue with the interface where some requests are lost if multiple\n        // XDomainRequests are being sent at the same time.\n        // Some info here: https://github.com/photonstorm/phaser/issues/1248\n        setTimeout(() => xdr.send(), 1);\n    }\n\n    /**\n     * Creates a source used in loading via an element.\n     *\n     * @private\n     * @param {string} type - The element type (video or audio).\n     * @param {string} url - The source URL to load from.\n     * @param {string} [mime] - The mime type of the video\n     * @return {HTMLSourceElement} The source element.\n     */\n    _createSource(type, url, mime) {\n        if (!mime) {\n            mime = `${type}/${this._getExtension(url)}`;\n        }\n\n        const source = document.createElement('source');\n\n        source.src = url;\n        source.type = mime;\n\n        return source;\n    }\n\n    /**\n     * Called if a load errors out.\n     *\n     * @param {Event} event - The error event from the element that emits it.\n     * @private\n     */\n    _onError(event) {\n        this.abort(`Failed to load element using: ${event.target.nodeName}`);\n    }\n\n    /**\n     * Called if a load progress event fires for an element or xhr/xdr.\n     *\n     * @private\n     * @param {XMLHttpRequestProgressEvent|Event} event - Progress event.\n     */\n    _onProgress(event) {\n        if (event && event.lengthComputable) {\n            this.onProgress.dispatch(this, event.loaded / event.total);\n        }\n    }\n\n    /**\n     * Called if a timeout event fires for an element.\n     *\n     * @private\n     */\n    _onTimeout() {\n        this.abort(`Load timed out.`);\n    }\n\n    /**\n     * Called if an error event fires for xhr/xdr.\n     *\n     * @private\n     */\n    _xhrOnError() {\n        const xhr = this.xhr;\n\n        this.abort(`${reqType(xhr)} Request failed. Status: ${xhr.status}, text: \"${xhr.statusText}\"`);\n    }\n\n    /**\n     * Called if an error event fires for xhr/xdr.\n     *\n     * @private\n     */\n    _xhrOnTimeout() {\n        const xhr = this.xhr;\n\n        this.abort(`${reqType(xhr)} Request timed out.`);\n    }\n\n    /**\n     * Called if an abort event fires for xhr/xdr.\n     *\n     * @private\n     */\n    _xhrOnAbort() {\n        const xhr = this.xhr;\n\n        this.abort(`${reqType(xhr)} Request was aborted by the user.`);\n    }\n\n    /**\n     * Called when data successfully loads from an xhr/xdr request.\n     *\n     * @private\n     * @param {XMLHttpRequestLoadEvent|Event} event - Load event\n     */\n    _xhrOnLoad() {\n        const xhr = this.xhr;\n        let text = '';\n        let status = typeof xhr.status === 'undefined' ? STATUS_OK : xhr.status; // XDR has no `.status`, assume 200.\n\n        // responseText is accessible only if responseType is '' or 'text' and on older browsers\n        if (xhr.responseType === '' || xhr.responseType === 'text' || typeof xhr.responseType === 'undefined') {\n            text = xhr.responseText;\n        }\n\n        // status can be 0 when using the `file://` protocol so we also check if a response is set.\n        // If it has a response, we assume 200; otherwise a 0 status code with no contents is an aborted request.\n        if (status === STATUS_NONE && (text.length > 0 || xhr.responseType === Resource.XHR_RESPONSE_TYPE.BUFFER)) {\n            status = STATUS_OK;\n        }\n        // handle IE9 bug: http://stackoverflow.com/questions/10046972/msie-returns-status-code-of-1223-for-ajax-request\n        else if (status === STATUS_IE_BUG_EMPTY) {\n            status = STATUS_EMPTY;\n        }\n\n        const statusType = (status / 100) | 0;\n\n        if (statusType === STATUS_TYPE_OK) {\n            // if text, just return it\n            if (this.xhrType === Resource.XHR_RESPONSE_TYPE.TEXT) {\n                this.data = text;\n                this.type = Resource.TYPE.TEXT;\n            }\n            // if json, parse into json object\n            else if (this.xhrType === Resource.XHR_RESPONSE_TYPE.JSON) {\n                try {\n                    this.data = JSON.parse(text);\n                    this.type = Resource.TYPE.JSON;\n                }\n                catch (e) {\n                    this.abort(`Error trying to parse loaded json: ${e}`);\n\n                    return;\n                }\n            }\n            // if xml, parse into an xml document or div element\n            else if (this.xhrType === Resource.XHR_RESPONSE_TYPE.DOCUMENT) {\n                try {\n                    if (window.DOMParser) {\n                        const domparser = new DOMParser();\n\n                        this.data = domparser.parseFromString(text, 'text/xml');\n                    }\n                    else {\n                        const div = document.createElement('div');\n\n                        div.innerHTML = text;\n\n                        this.data = div;\n                    }\n\n                    this.type = Resource.TYPE.XML;\n                }\n                catch (e) {\n                    this.abort(`Error trying to parse loaded xml: ${e}`);\n\n                    return;\n                }\n            }\n            // other types just return the response\n            else {\n                this.data = xhr.response || text;\n            }\n        }\n        else {\n            this.abort(`[${xhr.status}] ${xhr.statusText}: ${xhr.responseURL}`);\n\n            return;\n        }\n\n        this.complete();\n    }\n\n    /**\n     * Sets the `crossOrigin` property for this resource based on if the url\n     * for this resource is cross-origin. If crossOrigin was manually set, this\n     * function does nothing.\n     *\n     * @private\n     * @param {string} url - The url to test.\n     * @param {object} [loc=window.location] - The location object to test against.\n     * @return {string} The crossOrigin value to use (or empty string for none).\n     */\n    _determineCrossOrigin(url, loc) {\n        // data: and javascript: urls are considered same-origin\n        if (url.indexOf('data:') === 0) {\n            return '';\n        }\n\n        // A sandboxed iframe without the 'allow-same-origin' attribute will have a special\n        // origin designed not to match window.location.origin, and will always require\n        // crossOrigin requests regardless of whether the location matches.\n        if (window.origin !== window.location.origin) {\n            return 'anonymous';\n        }\n\n        // default is window.location\n        loc = loc || window.location;\n\n        if (!tempAnchor) {\n            tempAnchor = document.createElement('a');\n        }\n\n        // let the browser determine the full href for the url of this resource and then\n        // parse with the node url lib, we can't use the properties of the anchor element\n        // because they don't work in IE9 :(\n        tempAnchor.href = url;\n        url = parseUri(tempAnchor.href, { strictMode: true });\n\n        const samePort = (!url.port && loc.port === '') || (url.port === loc.port);\n        const protocol = url.protocol ? `${url.protocol}:` : '';\n\n        // if cross origin\n        if (url.host !== loc.hostname || !samePort || protocol !== loc.protocol) {\n            return 'anonymous';\n        }\n\n        return '';\n    }\n\n    /**\n     * Determines the responseType of an XHR request based on the extension of the\n     * resource being loaded.\n     *\n     * @private\n     * @return {Resource.XHR_RESPONSE_TYPE} The responseType to use.\n     */\n    _determineXhrType() {\n        return Resource._xhrTypeMap[this.extension] || Resource.XHR_RESPONSE_TYPE.TEXT;\n    }\n\n    /**\n     * Determines the loadType of a resource based on the extension of the\n     * resource being loaded.\n     *\n     * @private\n     * @return {Resource.LOAD_TYPE} The loadType to use.\n     */\n    _determineLoadType() {\n        return Resource._loadTypeMap[this.extension] || Resource.LOAD_TYPE.XHR;\n    }\n\n    /**\n     * Extracts the extension (sans '.') of the file being loaded by the resource.\n     *\n     * @private\n     * @return {string} The extension.\n     */\n    _getExtension() {\n        let url = this.url;\n        let ext = '';\n\n        if (this.isDataUrl) {\n            const slashIndex = url.indexOf('/');\n\n            ext = url.substring(slashIndex + 1, url.indexOf(';', slashIndex));\n        }\n        else {\n            const queryStart = url.indexOf('?');\n            const hashStart = url.indexOf('#');\n            const index = Math.min(\n                queryStart > -1 ? queryStart : url.length,\n                hashStart > -1 ? hashStart : url.length\n            );\n\n            url = url.substring(0, index);\n            ext = url.substring(url.lastIndexOf('.') + 1);\n        }\n\n        return ext.toLowerCase();\n    }\n\n    /**\n     * Determines the mime type of an XHR request based on the responseType of\n     * resource being loaded.\n     *\n     * @private\n     * @param {Resource.XHR_RESPONSE_TYPE} type - The type to get a mime type for.\n     * @return {string} The mime type to use.\n     */\n    _getMimeFromXhrType(type) {\n        switch (type) {\n            case Resource.XHR_RESPONSE_TYPE.BUFFER:\n                return 'application/octet-binary';\n\n            case Resource.XHR_RESPONSE_TYPE.BLOB:\n                return 'application/blob';\n\n            case Resource.XHR_RESPONSE_TYPE.DOCUMENT:\n                return 'application/xml';\n\n            case Resource.XHR_RESPONSE_TYPE.JSON:\n                return 'application/json';\n\n            case Resource.XHR_RESPONSE_TYPE.DEFAULT:\n            case Resource.XHR_RESPONSE_TYPE.TEXT:\n                /* falls through */\n            default:\n                return 'text/plain';\n        }\n    }\n}\n\n/**\n * The types of resources a resource could represent.\n *\n * @static\n * @readonly\n * @enum {number}\n */\nResource.STATUS_FLAGS = {\n    NONE:       0,\n    DATA_URL:   (1 << 0),\n    COMPLETE:   (1 << 1),\n    LOADING:    (1 << 2),\n};\n\n/**\n * The types of resources a resource could represent.\n *\n * @static\n * @readonly\n * @enum {number}\n */\nResource.TYPE = {\n    UNKNOWN:    0,\n    JSON:       1,\n    XML:        2,\n    IMAGE:      3,\n    AUDIO:      4,\n    VIDEO:      5,\n    TEXT:       6,\n};\n\n/**\n * The types of loading a resource can use.\n *\n * @static\n * @readonly\n * @enum {number}\n */\nResource.LOAD_TYPE = {\n    /** Uses XMLHttpRequest to load the resource. */\n    XHR:    1,\n    /** Uses an `Image` object to load the resource. */\n    IMAGE:  2,\n    /** Uses an `Audio` object to load the resource. */\n    AUDIO:  3,\n    /** Uses a `Video` object to load the resource. */\n    VIDEO:  4,\n};\n\n/**\n * The XHR ready states, used internally.\n *\n * @static\n * @readonly\n * @enum {string}\n */\nResource.XHR_RESPONSE_TYPE = {\n    /** string */\n    DEFAULT:    'text',\n    /** ArrayBuffer */\n    BUFFER:     'arraybuffer',\n    /** Blob */\n    BLOB:       'blob',\n    /** Document */\n    DOCUMENT:   'document',\n    /** Object */\n    JSON:       'json',\n    /** String */\n    TEXT:       'text',\n};\n\nResource._loadTypeMap = {\n    // images\n    gif:        Resource.LOAD_TYPE.IMAGE,\n    png:        Resource.LOAD_TYPE.IMAGE,\n    bmp:        Resource.LOAD_TYPE.IMAGE,\n    jpg:        Resource.LOAD_TYPE.IMAGE,\n    jpeg:       Resource.LOAD_TYPE.IMAGE,\n    tif:        Resource.LOAD_TYPE.IMAGE,\n    tiff:       Resource.LOAD_TYPE.IMAGE,\n    webp:       Resource.LOAD_TYPE.IMAGE,\n    tga:        Resource.LOAD_TYPE.IMAGE,\n    svg:        Resource.LOAD_TYPE.IMAGE,\n    'svg+xml':  Resource.LOAD_TYPE.IMAGE, // for SVG data urls\n\n    // audio\n    mp3:        Resource.LOAD_TYPE.AUDIO,\n    ogg:        Resource.LOAD_TYPE.AUDIO,\n    wav:        Resource.LOAD_TYPE.AUDIO,\n\n    // videos\n    mp4:        Resource.LOAD_TYPE.VIDEO,\n    webm:       Resource.LOAD_TYPE.VIDEO,\n};\n\nResource._xhrTypeMap = {\n    // xml\n    xhtml:      Resource.XHR_RESPONSE_TYPE.DOCUMENT,\n    html:       Resource.XHR_RESPONSE_TYPE.DOCUMENT,\n    htm:        Resource.XHR_RESPONSE_TYPE.DOCUMENT,\n    xml:        Resource.XHR_RESPONSE_TYPE.DOCUMENT,\n    tmx:        Resource.XHR_RESPONSE_TYPE.DOCUMENT,\n    svg:        Resource.XHR_RESPONSE_TYPE.DOCUMENT,\n\n    // This was added to handle Tiled Tileset XML, but .tsx is also a TypeScript React Component.\n    // Since it is way less likely for people to be loading TypeScript files instead of Tiled files,\n    // this should probably be fine.\n    tsx:        Resource.XHR_RESPONSE_TYPE.DOCUMENT,\n\n    // images\n    gif:        Resource.XHR_RESPONSE_TYPE.BLOB,\n    png:        Resource.XHR_RESPONSE_TYPE.BLOB,\n    bmp:        Resource.XHR_RESPONSE_TYPE.BLOB,\n    jpg:        Resource.XHR_RESPONSE_TYPE.BLOB,\n    jpeg:       Resource.XHR_RESPONSE_TYPE.BLOB,\n    tif:        Resource.XHR_RESPONSE_TYPE.BLOB,\n    tiff:       Resource.XHR_RESPONSE_TYPE.BLOB,\n    webp:       Resource.XHR_RESPONSE_TYPE.BLOB,\n    tga:        Resource.XHR_RESPONSE_TYPE.BLOB,\n\n    // json\n    json:       Resource.XHR_RESPONSE_TYPE.JSON,\n\n    // text\n    text:       Resource.XHR_RESPONSE_TYPE.TEXT,\n    txt:        Resource.XHR_RESPONSE_TYPE.TEXT,\n\n    // fonts\n    ttf:        Resource.XHR_RESPONSE_TYPE.BUFFER,\n    otf:        Resource.XHR_RESPONSE_TYPE.BUFFER,\n};\n\n// We can't set the `src` attribute to empty string, so on abort we set it to this 1px transparent gif\nResource.EMPTY_GIF = 'data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==';\n\n/**\n * Quick helper to set a value on one of the extension maps. Ensures there is no\n * dot at the start of the extension.\n *\n * @ignore\n * @param {object} map - The map to set on.\n * @param {string} extname - The extension (or key) to set.\n * @param {number} val - The value to set.\n */\nfunction setExtMap(map, extname, val) {\n    if (extname && extname.indexOf('.') === 0) {\n        extname = extname.substring(1);\n    }\n\n    if (!extname) {\n        return;\n    }\n\n    map[extname] = val;\n}\n\n/**\n * Quick helper to get string xhr type.\n *\n * @ignore\n * @param {XMLHttpRequest|XDomainRequest} xhr - The request to check.\n * @return {string} The type.\n */\nfunction reqType(xhr) {\n    return xhr.toString().replace('object ', '');\n}\n\n// Backwards compat\nif (typeof module !== 'undefined') {\n    module.exports.default = Resource; // eslint-disable-line no-undef\n}\n","const _keyStr = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\n\n/**\n * Encodes binary into base64.\n *\n * @param {string} input The input data to encode.\n * @returns {string} The encoded base64 string\n */\nexport function encodeBinary(input) {\n    let output = '';\n    let inx = 0;\n\n    while (inx < input.length) {\n        // Fill byte buffer array\n        const bytebuffer = [0, 0, 0];\n        const encodedCharIndexes = [0, 0, 0, 0];\n\n        for (let jnx = 0; jnx < bytebuffer.length; ++jnx) {\n            if (inx < input.length) {\n                // throw away high-order byte, as documented at:\n                // https://developer.mozilla.org/En/Using_XMLHttpRequest#Handling_binary_data\n                bytebuffer[jnx] = input.charCodeAt(inx++) & 0xff;\n            }\n            else {\n                bytebuffer[jnx] = 0;\n            }\n        }\n\n        // Get each encoded character, 6 bits at a time\n        // index 1: first 6 bits\n        encodedCharIndexes[0] = bytebuffer[0] >> 2;\n\n        // index 2: second 6 bits (2 least significant bits from input byte 1 + 4 most significant bits from byte 2)\n        encodedCharIndexes[1] = ((bytebuffer[0] & 0x3) << 4) | (bytebuffer[1] >> 4);\n\n        // index 3: third 6 bits (4 least significant bits from input byte 2 + 2 most significant bits from byte 3)\n        encodedCharIndexes[2] = ((bytebuffer[1] & 0x0f) << 2) | (bytebuffer[2] >> 6);\n\n        // index 3: forth 6 bits (6 least significant bits from input byte 3)\n        encodedCharIndexes[3] = bytebuffer[2] & 0x3f;\n\n        // Determine whether padding happened, and adjust accordingly\n        const paddingBytes = inx - (input.length - 1);\n\n        switch (paddingBytes) {\n            case 2:\n                // Set last 2 characters to padding char\n                encodedCharIndexes[3] = 64;\n                encodedCharIndexes[2] = 64;\n                break;\n\n            case 1:\n                // Set last character to padding char\n                encodedCharIndexes[3] = 64;\n                break;\n\n            default:\n                break; // No padding - proceed\n        }\n\n        // Now we will grab each appropriate character out of our keystring\n        // based on our index array and append it to the output string\n        for (let jnx = 0; jnx < encodedCharIndexes.length; ++jnx) {\n            output += _keyStr.charAt(encodedCharIndexes[jnx]);\n        }\n    }\n\n    return output;\n}\n\n// Backwards compat\nif (typeof module !== 'undefined') {\n    module.exports.default = encodeBinary; // eslint-disable-line no-undef\n}\n","import { Resource } from '../../Resource';\nimport { encodeBinary } from '../../b64';\n\nconst Url = window.URL || window.webkitURL;\n\n// a middleware for transforming XHR loaded Blobs into more useful objects\nexport function blobMiddlewareFactory() {\n    return function blobMiddleware(resource, next) {\n        if (!resource.data) {\n            next();\n\n            return;\n        }\n\n        // if this was an XHR load of a blob\n        if (resource.xhr && resource.xhrType === Resource.XHR_RESPONSE_TYPE.BLOB) {\n            // if there is no blob support we probably got a binary string back\n            if (!window.Blob || typeof resource.data === 'string') {\n                const type = resource.xhr.getResponseHeader('content-type');\n\n                // this is an image, convert the binary string into a data url\n                if (type && type.indexOf('image') === 0) {\n                    resource.data = new Image();\n                    resource.data.src = `data:${type};base64,${encodeBinary(resource.xhr.responseText)}`;\n\n                    resource.type = Resource.TYPE.IMAGE;\n\n                    // wait until the image loads and then callback\n                    resource.data.onload = () => {\n                        resource.data.onload = null;\n\n                        next();\n                    };\n\n                    // next will be called on load\n                    return;\n                }\n            }\n            // if content type says this is an image, then we should transform the blob into an Image object\n            else if (resource.data.type.indexOf('image') === 0) {\n                const src = Url.createObjectURL(resource.data);\n\n                resource.blob = resource.data;\n                resource.data = new Image();\n                resource.data.src = src;\n\n                resource.type = Resource.TYPE.IMAGE;\n\n                // cleanup the no longer used blob after the image loads\n                // TODO: Is this correct? Will the image be invalid after revoking?\n                resource.data.onload = () => {\n                    Url.revokeObjectURL(src);\n                    resource.data.onload = null;\n\n                    next();\n                };\n\n                // next will be called on load.\n                return;\n            }\n        }\n\n        next();\n    };\n}\n","import { Resource } from 'resource-loader';\nimport { Texture } from '@pixi/core';\n\n/**\n * Loader plugin for handling Texture resources.\n * @class\n * @memberof PIXI\n * @implements PIXI.ILoaderPlugin\n */\nexport default class TextureLoader\n{\n    /**\n     * Called after a resource is loaded.\n     * @see PIXI.Loader.loaderMiddleware\n     * @param {PIXI.LoaderResource} resource\n     * @param {function} next\n     */\n    static use(resource, next)\n    {\n        // create a new texture if the data is an Image object\n        if (resource.data && resource.type === Resource.TYPE.IMAGE)\n        {\n            resource.texture = Texture.fromLoader(\n                resource.data,\n                resource.url,\n                resource.name\n            );\n        }\n        next();\n    }\n}\n","import ResourceLoader from 'resource-loader';\nimport { EventEmitter } from '@pixi/utils';\nimport { blobMiddlewareFactory } from 'resource-loader/lib/middlewares/parsing/blob';\nimport TextureLoader from './TextureLoader';\n\n/**\n * The new loader, extends Resource Loader by Chad Engler: https://github.com/englercj/resource-loader\n *\n * ```js\n * const loader = PIXI.Loader.shared; // PixiJS exposes a premade instance for you to use.\n * //or\n * const loader = new PIXI.Loader(); // you can also create your own if you want\n *\n * const sprites = {};\n *\n * // Chainable `add` to enqueue a resource\n * loader.add('bunny', 'data/bunny.png')\n *       .add('spaceship', 'assets/spritesheet.json');\n * loader.add('scoreFont', 'assets/score.fnt');\n *\n * // Chainable `pre` to add a middleware that runs for each resource, *before* loading that resource.\n * // This is useful to implement custom caching modules (using filesystem, indexeddb, memory, etc).\n * loader.pre(cachingMiddleware);\n *\n * // Chainable `use` to add a middleware that runs for each resource, *after* loading that resource.\n * // This is useful to implement custom parsing modules (like spritesheet parsers, spine parser, etc).\n * loader.use(parsingMiddleware);\n *\n * // The `load` method loads the queue of resources, and calls the passed in callback called once all\n * // resources have loaded.\n * loader.load((loader, resources) => {\n *     // resources is an object where the key is the name of the resource loaded and the value is the resource object.\n *     // They have a couple default properties:\n *     // - `url`: The URL that the resource was loaded from\n *     // - `error`: The error that happened when trying to load (if any)\n *     // - `data`: The raw data that was loaded\n *     // also may contain other properties based on the middleware that runs.\n *     sprites.bunny = new PIXI.TilingSprite(resources.bunny.texture);\n *     sprites.spaceship = new PIXI.TilingSprite(resources.spaceship.texture);\n *     sprites.scoreFont = new PIXI.TilingSprite(resources.scoreFont.texture);\n * });\n *\n * // throughout the process multiple signals can be dispatched.\n * loader.onProgress.add(() => {}); // called once per loaded/errored file\n * loader.onError.add(() => {}); // called once per errored file\n * loader.onLoad.add(() => {}); // called once per loaded file\n * loader.onComplete.add(() => {}); // called once when the queued resources all load.\n * ```\n *\n * @see https://github.com/englercj/resource-loader\n *\n * @class Loader\n * @memberof PIXI\n * @param {string} [baseUrl=''] - The base url for all resources loaded by this loader.\n * @param {number} [concurrency=10] - The number of resources to load concurrently.\n */\nexport default class Loader extends ResourceLoader\n{\n    constructor(baseUrl, concurrency)\n    {\n        super(baseUrl, concurrency);\n        EventEmitter.call(this);\n\n        for (let i = 0; i < Loader._plugins.length; ++i)\n        {\n            const plugin = Loader._plugins[i];\n            const { pre, use } = plugin;\n\n            if (pre)\n            {\n                this.pre(pre);\n            }\n\n            if (use)\n            {\n                this.use(use);\n            }\n        }\n\n        // Compat layer, translate the new v2 signals into old v1 events.\n        this.onStart.add((l) => this.emit('start', l));\n        this.onProgress.add((l, r) => this.emit('progress', l, r));\n        this.onError.add((e, l, r) => this.emit('error', e, l, r));\n        this.onLoad.add((l, r) => this.emit('load', l, r));\n        this.onComplete.add((l, r) => this.emit('complete', l, r));\n\n        /**\n         * If this loader cannot be destroyed.\n         * @member {boolean}\n         * @default false\n         * @private\n         */\n        this._protected = false;\n    }\n\n    /**\n     * Destroy the loader, removes references.\n     * @private\n     */\n    destroy()\n    {\n        if (!this._protected)\n        {\n            this.removeAllListeners();\n            this.reset();\n        }\n    }\n\n    /**\n     * A premade instance of the loader that can be used to load resources.\n     * @name shared\n     * @type {PIXI.Loader}\n     * @static\n     * @memberof PIXI.Loader\n     */\n    static get shared()\n    {\n        let shared = Loader._shared;\n\n        if (!shared)\n        {\n            shared = new Loader();\n            shared._protected = true;\n            Loader._shared = shared;\n        }\n\n        return shared;\n    }\n}\n\n// Copy EE3 prototype (mixin)\nObject.assign(Loader.prototype, EventEmitter.prototype);\n\n/**\n * Collection of all installed `use` middleware for Loader.\n *\n * @static\n * @member {Array<PIXI.ILoaderPlugin>} _plugins\n * @memberof PIXI.Loader\n * @private\n */\nLoader._plugins = [];\n\n/**\n * Adds a Loader plugin for the global shared loader and all\n * new Loader instances created.\n *\n * @static\n * @method registerPlugin\n * @memberof PIXI.Loader\n * @param {PIXI.ILoaderPlugin} plugin - The plugin to add\n * @return {PIXI.Loader} Reference to PIXI.Loader for chaining\n */\nLoader.registerPlugin = function registerPlugin(plugin)\n{\n    Loader._plugins.push(plugin);\n\n    if (plugin.add)\n    {\n        plugin.add();\n    }\n\n    return Loader;\n};\n\n// parse any blob into more usable objects (e.g. Image)\nLoader.registerPlugin({ use: blobMiddlewareFactory() });\n\n// parse any Image objects into textures\nLoader.registerPlugin(TextureLoader);\n\n/**\n * Plugin to be installed for handling specific Loader resources.\n *\n * @memberof PIXI\n * @typedef ILoaderPlugin\n * @property {function} [add] - Function to call immediate after registering plugin.\n * @property {PIXI.Loader.loaderMiddleware} [pre] - Middleware function to run before load, the\n *           arguments for this are `(resource, next)`\n * @property {PIXI.Loader.loaderMiddleware} [use] - Middleware function to run after load, the\n *           arguments for this are `(resource, next)`\n */\n\n/**\n * @memberof PIXI.Loader\n * @callback loaderMiddleware\n * @param {PIXI.LoaderResource} resource\n * @param {function} next\n */\n\n/**\n * @memberof PIXI.Loader#\n * @member {object} onStart\n */\n\n/**\n * @memberof PIXI.Loader#\n * @member {object} onProgress\n */\n\n/**\n * @memberof PIXI.Loader#\n * @member {object} onError\n */\n\n/**\n * @memberof PIXI.Loader#\n * @member {object} onLoad\n */\n\n/**\n * @memberof PIXI.Loader#\n * @member {object} onComplete\n */\n","import Loader from './Loader';\n\n/**\n * Application plugin for supporting loader option. Installing the LoaderPlugin\n * is not necessary if using **pixi.js** or **pixi.js-legacy**.\n * @example\n * import {AppLoaderPlugin} from '@pixi/loaders';\n * import {Application} from '@pixi/app';\n * Application.registerPlugin(AppLoaderPlugin);\n * @class\n * @memberof PIXI\n */\nexport default class AppLoaderPlugin\n{\n    /**\n     * Called on application constructor\n     * @param {object} options\n     * @private\n     */\n    static init(options)\n    {\n        options = Object.assign({\n            sharedLoader: false,\n        }, options);\n\n        /**\n         * Loader instance to help with asset loading.\n         * @name PIXI.Application#loader\n         * @type {PIXI.Loader}\n         * @readonly\n         */\n        this.loader = options.sharedLoader ? Loader.shared : new Loader();\n    }\n\n    /**\n     * Called when application destroyed\n     * @private\n     */\n    static destroy()\n    {\n        if (this.loader)\n        {\n            this.loader.destroy();\n            this.loader = null;\n        }\n    }\n}\n","import { Resource } from 'resource-loader';\n/**\n * Reference to **{@link https://github.com/englercj/resource-loader\n * resource-loader}**'s Resource class.\n * @see http://englercj.github.io/resource-loader/Resource.html\n * @class LoaderResource\n * @memberof PIXI\n */\nexport const LoaderResource = Resource;\nexport { default as Loader } from './Loader';\nexport { default as TextureLoader } from './TextureLoader';\nexport { default as AppLoaderPlugin } from './AppLoaderPlugin';\n"],"names":["arguments","useXdr","window","XDomainRequest","XMLHttpRequest","tempAnchor","STATUS_NONE","STATUS_OK","STATUS_EMPTY","STATUS_IE_BUG_EMPTY","STATUS_TYPE_OK","_noop","Resource","setExtensionLoadType","extname","loadType","_loadTypeMap","setExtensionXhrType","xhrType","_xhrTypeMap","name","url","options","Error","_flags","_setFlag","STATUS_FLAGS","DATA_URL","indexOf","extension","_getExtension","data","crossOrigin","timeout","_determineLoadType","metadata","error","xhr","children","type","TYPE","UNKNOWN","progressChunk","_dequeue","_onLoadBinding","_elementTimer","_boundComplete","complete","bind","_boundOnError","_onError","_boundOnProgress","_onProgress","_boundOnTimeout","_onTimeout","_boundXhrOnError","_xhrOnError","_boundXhrOnTimeout","_xhrOnTimeout","_boundXhrOnAbort","_xhrOnAbort","_boundXhrOnLoad","_xhrOnLoad","onStart","Signal","onProgress","onComplete","onAfterMiddleware","_clearEvents","_finish","abort","message","xdr","src","EMPTY_GIF","firstChild","removeChild","load","cb","isLoading","isComplete","once","LOADING","dispatch","_determineCrossOrigin","LOAD_TYPE","IMAGE","_loadElement","AUDIO","_loadSourceElement","VIDEO","XHR","_loadXdr","_loadXhr","_hasFlag","flag","value","removeEventListener","onerror","ontimeout","onprogress","onload","COMPLETE","loadElement","Image","document","createElement","skipSource","addEventListener","setTimeout","Audio","navigator","isCocoonJS","Array","isArray","mimeTypes","mimeType","i","length","appendChild","_createSource","_determineXhrType","open","XHR_RESPONSE_TYPE","JSON","DOCUMENT","responseType","TEXT","send","mime","source","event","target","nodeName","lengthComputable","loaded","total","reqType","status","statusText","text","responseText","BUFFER","statusType","parse","e","DOMParser","domparser","parseFromString","div","innerHTML","XML","response","responseURL","loc","origin","location","href","strictMode","samePort","port","protocol","host","hostname","ext","isDataUrl","slashIndex","substring","queryStart","hashStart","index","Math","min","lastIndexOf","toLowerCase","_getMimeFromXhrType","BLOB","DEFAULT","setExtMap","map","val","toString","replace","encodeBinary","_keyStr","input","output","inx","bytebuffer","encodedCharIndexes","jnx","charCodeAt","paddingBytes","charAt","blobMiddlewareFactory","Url","URL","webkitURL","blobMiddleware","resource","next","Blob","getResponseHeader","createObjectURL","blob","revokeObjectURL","super","let","const","this"],"mappings":"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"}